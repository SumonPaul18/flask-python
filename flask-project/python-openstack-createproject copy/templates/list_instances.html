{% extends "base.html" %}

{% block title %}List Instances{% endblock %}

{% block content %}
<h1>Instances</h1>
<a href="{{ url_for('create_instance', username=current_user.username) }}" class="btn btn-primary mb-3">Create New Instance</a>
<table class="table table-striped">
    <thead>
      <tr>
          <th>Name</th>
          <th>Status</th>
          <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for instance in instances %}
          <tr>
              <td>{{ instance.name }}</td>
              <td>{{ instance.status }}</td>
              <td>
                  <!-- Start Instance -->
                  <form action="{{ url_for('start_instance', username=current_user.username, instance_id=instance.id) }}" method="POST" style="display:inline;">
                      <button type="submit" class="btn btn-success btn-sm">Start</button>
                  </form>

                  <!-- Stop Instance -->
                  <form action="{{ url_for('stop_instance', username=current_user.username, instance_id=instance.id) }}" method="POST" style="display:inline;">
                      <button type="submit" class="btn btn-warning btn-sm">Stop</button>
                  </form>

                  <!-- Restart Instance -->
                  <form action="{{ url_for('restart_instance', username=current_user.username, instance_id=instance.id) }}" method="POST" style="display:inline;">
                      <button type="submit" class="btn btn-info btn-sm">Restart</button>
                  </form>

                  <!-- Delete Instance -->
                  <form action="{{ url_for('delete_instance', username=current_user.username, instance_id=instance.id) }}" method="POST" style="display:inline;">
                      <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                  </form>

              </td>
          </tr>
      {% endfor %}
      {% if not instances %}
          <tr><td colspan='3' class='text-center'>No instances found.</td></tr>
      {% endif %}
    </tbody>
</table>
{% endblock %}
